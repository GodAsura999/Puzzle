<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<title>600x600 puzle (centrs fiksÄ“ts)</title>

<style>
:root {
  --board-size: 600px;
  --piece-size: 200px;
}

body {
  font-family: Arial, sans-serif;
  text-align: center;
}

#controls {
  margin-bottom: 20px;
}

#pieces {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-bottom: 30px;
}

.piece {
  width: var(--piece-size);
  height: var(--piece-size);
  cursor: grab;
}

.fixed {
  cursor: default;
}

.hidden {
  display: none;
}

/* PUZLES TERITORIJA */
#board {
  width: var(--board-size);
  height: var(--board-size);
  display: grid;
  grid-template-columns: repeat(3, var(--piece-size));
  grid-template-rows: repeat(3, var(--piece-size));
  margin: auto;
  border: 4px solid #222;
}

.slot {
  box-sizing: border-box;
  border: 1px dashed #777;
}
</style>
</head>
<script>
/* ====== PAMATA AIZSARDZÄªBA PRET KODA APSKATI ====== */

/* Aizliedz labo klikÅ¡Ä·i */
document.addEventListener("contextmenu", e => e.preventDefault());

/* BloÄ·Ä“ bieÅ¾Äkos Ä«sceÄ¼us */
document.addEventListener("keydown", e => {
  if (
    e.key === "F12" ||
    (e.ctrlKey && e.shiftKey && ["I", "J", "C"].includes(e.key)) ||
    (e.ctrlKey && e.key === "U")
  ) {
    e.preventDefault();
    e.stopPropagation();
    return false;
  }
});

/* DevTools detekcija */
(function detectDevTools() {
  let devtoolsOpen = false;

  const threshold = 160;
  setInterval(() => {
    const widthDiff = window.outerWidth - window.innerWidth;
    const heightDiff = window.outerHeight - window.innerHeight;

    if (widthDiff > threshold || heightDiff > threshold) {
      if (!devtoolsOpen) {
        devtoolsOpen = true;
        document.body.innerHTML = "<h1>âŒ PiekÄ¼uve liegta</h1>";
      }
    }
  }, 500);
})();

/* AizsardzÄ«ba pret view-source */
if (window.location.protocol === "view-source:") {
  document.body.innerHTML = "";
}
</script>

<body>

<div id="controls">
  <input id="codeInput" placeholder="Ievadi kodu">
  <button onclick="checkCode()">ApstiprinÄt</button>
  <p id="message"></p>
</div>

<h3>AtbloÄ·Ä“tie gabali</h3>
<div id="pieces">
  <img src="piece1.png" id="piece1" class="piece hidden" draggable="true">
  <img src="piece2.png" id="piece2" class="piece hidden" draggable="true">
  <img src="piece3.png" id="piece3" class="piece hidden" draggable="true">
  <img src="piece4.png" id="piece4" class="piece hidden" draggable="true">
  <img src="piece6.png" id="piece6" class="piece hidden" draggable="true">
  <img src="piece7.png" id="piece7" class="piece hidden" draggable="true">
  <img src="piece8.png" id="piece8" class="piece hidden" draggable="true">
  <img src="piece9.png" id="piece9" class="piece hidden" draggable="true">
</div>

<div id="board">
  <div class="slot" data-correct="piece1"></div>
  <div class="slot" data-correct="piece2"></div>
  <div class="slot" data-correct="piece3"></div>

  <div class="slot" data-correct="piece4"></div>
  <!-- CENTRÄ€LAIS GABALS -->
  <div class="slot" data-correct="piece5">
    <img src="piece5.png" id="piece5" class="piece fixed" draggable="false">
  </div>
  <div class="slot" data-correct="piece6"></div>

  <div class="slot" data-correct="piece7"></div>
  <div class="slot" data-correct="piece8"></div>
  <div class="slot" data-correct="piece9"></div>
</div>

<script>
/* KODI â€” JÄ€SAKRÄªT PILNÄªGI PRECÄªZI */
const codes = {
  "A1": "piece1",
  "B2": "piece2",
  "C3": "piece3",
  "D4": "piece4",
  "F6": "piece6",
  "G7": "piece7",
  "H8": "piece8",
  "I9": "piece9"
};

let draggedPiece = null;

/* DRAG */
document.querySelectorAll(".piece").forEach(piece => {
  piece.addEventListener("dragstart", () => {
    if (!piece.classList.contains("fixed")) {
      draggedPiece = piece;
    }
  });
});

/* DROP â€“ TIKAI PAREIZA VIETA */
document.querySelectorAll(".slot").forEach(slot => {
  slot.addEventListener("dragover", e => e.preventDefault());
  slot.addEventListener("drop", () => {
    if (
      draggedPiece &&
      slot.dataset.correct === draggedPiece.id &&
      !slot.firstChild
    ) {
      slot.appendChild(draggedPiece);
      draggedPiece = null;
      checkWin();
    }
  });
});

/* KODA PÄ€RBAUDE â€” IDENTISKA SAKRITÄªBA */
function checkCode() {
  const input = document.getElementById("codeInput").value.trim();
  const msg = document.getElementById("message");

  if (codes.hasOwnProperty(input)) {
    const piece = document.getElementById(codes[input]);

    if (piece.classList.contains("hidden")) {
      piece.classList.remove("hidden");
      msg.textContent = "Gabals atbloÄ·Ä“ts!";
    } else {
      msg.textContent = "Å is gabals jau ir atbloÄ·Ä“ts.";
    }
  } else {
    msg.textContent = "Nepareizs kods.";
  }

  document.getElementById("codeInput").value = "";
}

/* UZVARAS PÄ€RBAUDE */
function checkWin() {
  const slots = document.querySelectorAll(".slot");
  for (let slot of slots) {
    if (!slot.firstChild) return;
  }
  alert("ğŸ‰ Puzle salikta pareizi!");
}
</script>

</body>
</html>

